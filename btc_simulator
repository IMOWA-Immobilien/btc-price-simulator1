import streamlit as st
import matplotlib.pyplot as plt

# Titel
st.title("ðŸ§® Bitcoin-Preis-Simulator (in EUR)")
st.markdown("Passe die Marktkapitalisierung (in Billionen USD) und das BTC-Angebot an, um den theoretischen Preis pro Bitcoin in Euro zu berechnen.")

# EUR/USD-Wechselkurs (manuell oder spÃ¤ter automatisch abrufbar)
usd_to_eur = st.number_input("Aktueller USD â†’ EUR Wechselkurs:", value=0.92, step=0.01)

# Eingabefelder
market_caps = st.multiselect(
    label="WÃ¤hle die Marktkapitalisierung aus (in Billionen US-Dollar):",
    options=[1, 5, 10, 21, 50, 100, 200],
    default=[1, 10, 21, 100]
)

btc_supply = st.slider(
    label="Bitcoin im Umlauf (Anzahl):",
    min_value=15_000_000,
    max_value=21_000_000,
    value=21_000_000,
    step=100_000
)

st.markdown("---")

# Berechnung & Anzeige
def plot_btc_price(market_caps, btc_supply, usd_to_eur):
    prices_usd = [(cap * 1e12) / btc_supply for cap in market_caps]
    prices_eur = [price * usd_to_eur for price in prices_usd]
    scenarios = [f"{cap} Billionen USD" for cap in market_caps]

    fig, ax = plt.subplots(figsize=(10, 6))
    ax.bar(scenarios, prices_eur)
    ax.set_title("Bitcoin-Preis bei verschiedenen Marktkapitalisierungen")
    ax.set_ylabel("Preis pro Bitcoin (in EUR)")
    ax.set_yscale('log')
    ax.grid(axis='y', linestyle='--', alpha=0.7)
    st.pyplot(fig)

    # ZusÃ¤tzliche Tabelle
    st.markdown("### ðŸ“Š Detaillierte Berechnung")
    for cap, usd, eur in zip(market_caps, prices_usd, prices_eur):
        st.write(f"Bei {cap} Billionen USD Marktkapitalisierung: **{usd:,.0f} USD** â‰ˆ **{eur:,.0f} EUR** pro BTC")

if market_caps:
    plot_btc_price(market_caps, btc_supply, usd_to_eur)
else:
    st.info("Bitte wÃ¤hle mindestens eine Marktkapitalisierung aus.")
